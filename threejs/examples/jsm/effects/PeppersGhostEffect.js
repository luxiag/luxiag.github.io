import{PerspectiveCamera,Quaternion,Vector3}from"three";class PeppersGhostEffect{constructor(e){const t=this;let r,o,s;t.cameraDistance=15,t.reflectFromAbove=!1;const a=new PerspectiveCamera,i=new PerspectiveCamera,n=new PerspectiveCamera,c=new PerspectiveCamera,p=new Vector3,l=new Quaternion,m=new Vector3;e.autoClear=!1,this.setSize=function(t,a){r=t/2,t<a?(o=t/3,s=t/3):(o=a/3,s=a/3),e.setSize(t,a)},this.render=function(d,u){!0===d.matrixWorldAutoUpdate&&d.updateMatrixWorld(),null===u.parent&&!0===u.matrixWorldAutoUpdate&&u.updateMatrixWorld(),u.matrixWorld.decompose(p,l,m),a.position.copy(p),a.quaternion.copy(l),a.translateZ(t.cameraDistance),a.lookAt(d.position),i.position.copy(p),i.quaternion.copy(l),i.translateZ(-t.cameraDistance),i.lookAt(d.position),i.rotation.z+=Math.PI/180*180,n.position.copy(p),n.quaternion.copy(l),n.translateX(-t.cameraDistance),n.lookAt(d.position),n.rotation.x+=Math.PI/180*90,c.position.copy(p),c.quaternion.copy(l),c.translateX(t.cameraDistance),c.lookAt(d.position),c.rotation.x+=Math.PI/180*90,e.clear(),e.setScissorTest(!0),e.setScissor(r-o/2,2*s,o,s),e.setViewport(r-o/2,2*s,o,s),t.reflectFromAbove?e.render(d,i):e.render(d,a),e.setScissor(r-o/2,0,o,s),e.setViewport(r-o/2,0,o,s),t.reflectFromAbove?e.render(d,a):e.render(d,i),e.setScissor(r-o/2-o,s,o,s),e.setViewport(r-o/2-o,s,o,s),t.reflectFromAbove?e.render(d,c):e.render(d,n),e.setScissor(r+o/2,s,o,s),e.setViewport(r+o/2,s,o,s),t.reflectFromAbove?e.render(d,n):e.render(d,c),e.setScissorTest(!1)}}}export{PeppersGhostEffect};