import{ShaderMaterial,UniformsUtils}from"three";import{Pass,FullScreenQuad}from"./Pass.js";import{CopyShader}from"../shaders/CopyShader.js";class TexturePass extends Pass{constructor(e,s){super();const r=CopyShader;this.map=e,this.opacity=void 0!==s?s:1,this.uniforms=UniformsUtils.clone(r.uniforms),this.material=new ShaderMaterial({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.fsQuad=new FullScreenQuad(null)}render(e,s,r){const t=e.autoClear;e.autoClear=!1,this.fsQuad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(),this.fsQuad.render(e),e.autoClear=t}dispose(){this.material.dispose(),this.fsQuad.dispose()}}export{TexturePass};