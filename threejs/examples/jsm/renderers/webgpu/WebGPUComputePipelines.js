import WebGPUProgrammableStage from"./WebGPUProgrammableStage.js";class WebGPUComputePipelines{constructor(e,t){this.device=e,this.nodes=t,this.pipelines=new WeakMap,this.stages={compute:new WeakMap}}has(e){return void 0!==this.pipelines.get(e)}get(e){let t=this.pipelines.get(e);if(void 0===t){const s=this.device,i=this.nodes.getForCompute(e).computeShader,p={computeShader:i};let a=this.stages.compute.get(p);void 0===a&&(a=new WebGPUProgrammableStage(s,i,"compute"),this.stages.compute.set(p,a)),t=s.createComputePipeline({compute:a.stage,layout:"auto"}),this.pipelines.set(e,t)}return t}dispose(){this.pipelines=new WeakMap,this.stages={compute:new WeakMap}}}export default WebGPUComputePipelines;