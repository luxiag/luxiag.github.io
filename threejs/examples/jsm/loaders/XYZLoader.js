import{BufferGeometry,FileLoader,Float32BufferAttribute,Loader}from"three";class XYZLoader extends Loader{load(e,t,r,s){const a=this,o=new FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(r){try{t(a.parse(r))}catch(t){s?s(t):console.error(t),a.manager.itemError(e)}}),r,s)}parse(e){const t=e.split("\n"),r=[],s=[];for(let e of t){if(e=e.trim(),"#"===e.charAt(0))continue;const t=e.split(/\s+/);3===t.length&&(r.push(parseFloat(t[0])),r.push(parseFloat(t[1])),r.push(parseFloat(t[2]))),6===t.length&&(r.push(parseFloat(t[0])),r.push(parseFloat(t[1])),r.push(parseFloat(t[2])),s.push(parseFloat(t[3])/255),s.push(parseFloat(t[4])/255),s.push(parseFloat(t[5])/255))}const a=new BufferGeometry;return a.setAttribute("position",new Float32BufferAttribute(r,3)),s.length>0&&a.setAttribute("color",new Float32BufferAttribute(s,3)),a}}export{XYZLoader};