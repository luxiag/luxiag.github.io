import{CubeTexture,DataTexture,FileLoader,FloatType,HalfFloatType,LinearFilter,LinearSRGBColorSpace,Loader}from"three";import{RGBELoader}from"../loaders/RGBELoader.js";class HDRCubeTextureLoader extends Loader{constructor(e){super(e),this.hdrLoader=new RGBELoader,this.type=HalfFloatType}load(e,t,a,r){const o=new CubeTexture;switch(o.type=this.type,o.type){case FloatType:case HalfFloatType:o.colorSpace=LinearSRGBColorSpace,o.minFilter=LinearFilter,o.magFilter=LinearFilter,o.generateMipmaps=!1}const i=this;let s=0;function p(t,a,r,p){new FileLoader(i.manager).setPath(i.path).setResponseType("arraybuffer").setWithCredentials(i.withCredentials).load(e[t],(function(e){s++;const r=i.hdrLoader.parse(e);if(r){if(void 0!==r.data){const e=new DataTexture(r.data,r.width,r.height);e.type=o.type,e.colorSpace=o.colorSpace,e.format=o.format,e.minFilter=o.minFilter,e.magFilter=o.magFilter,e.generateMipmaps=o.generateMipmaps,o.images[t]=e}6===s&&(o.needsUpdate=!0,a&&a(o))}}),r,p)}for(let o=0;o<e.length;o++)p(o,t,a,r);return o}setDataType(e){return this.type=e,this.hdrLoader.setDataType(e),this}}export{HDRCubeTextureLoader};