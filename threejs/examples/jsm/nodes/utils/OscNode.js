import Node,{addNodeClass}from"../core/Node.js";import{timerLocal}from"./TimerNode.js";import{nodeObject,nodeProxy}from"../shadernode/ShaderNode.js";class OscNode extends Node{constructor(e=OscNode.SINE,o=timerLocal()){super(),this.method=e,this.timeNode=o}getNodeType(e){return this.timeNode.getNodeType(e)}construct(){const e=this.method,o=nodeObject(this.timeNode);let d=null;return e===OscNode.SINE?d=o.add(.75).mul(2*Math.PI).sin().mul(.5).add(.5):e===OscNode.SQUARE?d=o.fract().round():e===OscNode.TRIANGLE?d=o.add(.5).fract().mul(2).sub(1).abs():e===OscNode.SAWTOOTH&&(d=o.fract()),d}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}OscNode.SINE="sine",OscNode.SQUARE="square",OscNode.TRIANGLE="triangle",OscNode.SAWTOOTH="sawtooth";export default OscNode;export const oscSine=nodeProxy(OscNode,OscNode.SINE);export const oscSquare=nodeProxy(OscNode,OscNode.SQUARE);export const oscTriangle=nodeProxy(OscNode,OscNode.TRIANGLE);export const oscSawtooth=nodeProxy(OscNode,OscNode.SAWTOOTH);addNodeClass(OscNode);