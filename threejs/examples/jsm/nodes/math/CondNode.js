import Node,{addNodeClass}from"../core/Node.js";import{property}from"../core/PropertyNode.js";import{context as contextNode}from"../core/ContextNode.js";import{addNodeElement,nodeProxy}from"../shadernode/ShaderNode.js";class CondNode extends Node{constructor(e,o,d=null){super(),this.condNode=e,this.ifNode=o,this.elseNode=d}getNodeType(e){const o=this.ifNode.getNodeType(e);if(null!==this.elseNode){const d=this.elseNode.getNodeType(e);if(e.getTypeLength(d)>e.getTypeLength(o))return d}return o}generate(e){const o=this.getNodeType(e),d={tempWrite:!1},{ifNode:t,elseNode:n}=this,r="void"!==t.getNodeType(e)||n&&"void"!==n.getNodeType(e),s=r?property(o).build(e):"",l=contextNode(this.condNode).build(e,"bool");e.addFlowCode(`\n${e.tab}if ( ${l} ) {\n\n`).addFlowTab();let N=contextNode(this.ifNode,d).build(e,o);if(N=r?s+" = "+N+";":N,e.removeFlowTab().addFlowCode(e.tab+"\t"+N+"\n\n"+e.tab+"}"),null!==n){e.addFlowCode(" else {\n\n").addFlowTab();let t=contextNode(n,d).build(e,o);t=s?s+" = "+t+";":t,e.removeFlowTab().addFlowCode(e.tab+"\t"+t+"\n\n"+e.tab+"}\n\n")}else e.addFlowCode("\n\n");return s}}export default CondNode;export const cond=nodeProxy(CondNode);addNodeElement("cond",cond),addNodeClass(CondNode);