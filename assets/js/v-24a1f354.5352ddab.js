"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5999],{88527:(a,n,e)=>{e.r(n),e.d(n,{default:()=>l});var s=e(71534),t=e(32049),o=e(86171),p=e(97630);const c=(0,s.uE)('<div class="language-glsl line-numbers-mode" data-ext="glsl" data-v-1037eb5e><pre class="language-glsl" data-v-1037eb5e><code data-v-1037eb5e><span class="token macro property" data-v-1037eb5e><span class="token directive-hash" data-v-1037eb5e>#</span> <span class="token directive keyword" data-v-1037eb5e>vertex</span><span class="token expression" data-v-1037eb5e>Shader</span></span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>vec3</span> uColor<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uFrequency<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uScale<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uTim\n<span class="token keyword" data-v-1037eb5e>varying</span> <span class="token keyword" data-v-1037eb5e>float</span> vElevation<span class="token punctuation" data-v-1037eb5e>;</span>\n\n<span class="token keyword" data-v-1037eb5e>varying</span> <span class="token keyword" data-v-1037eb5e>vec2</span> vUv\n<span class="token comment" data-v-1037eb5e>// highp -2^16-2^16</span>\n<span class="token comment" data-v-1037eb5e>// mediump = -2^10-2^10</span>\n<span class="token comment" data-v-1037eb5e>// lowp -2^8-2^8</span>\n<span class="token keyword" data-v-1037eb5e>precision</span> <span class="token keyword" data-v-1037eb5e>highp</span> <span class="token keyword" data-v-1037eb5e>float</span><span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>void</span> <span class="token function" data-v-1037eb5e>main</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> modelPosition <span class="token operator" data-v-1037eb5e>=</span> modelMatrix <span class="token operator" data-v-1037eb5e>*</span> <span class="token keyword" data-v-1037eb5e>vec4</span><span class="token punctuation" data-v-1037eb5e>(</span> position<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span> \n    modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>z <span class="token operator" data-v-1037eb5e>+=</span> <span class="token function" data-v-1037eb5e>sin</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token punctuation" data-v-1037eb5e>(</span>modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token operator" data-v-1037eb5e>+</span>uTime<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> uFrequency<span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>*</span>uScale <span class="token punctuation" data-v-1037eb5e>;</span>\n    modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>z <span class="token operator" data-v-1037eb5e>+=</span> <span class="token function" data-v-1037eb5e>cos</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token punctuation" data-v-1037eb5e>(</span>modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token operator" data-v-1037eb5e>+</span>uTime<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> uFrequency<span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>*</span>uScale\n    vElevation <span class="token operator" data-v-1037eb5e>=</span> modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token punctuation" data-v-1037eb5e>;</span>\n    gl_Position <span class="token operator" data-v-1037eb5e>=</span>  projectionMatrix <span class="token operator" data-v-1037eb5e>*</span> viewMatrix <span class="token operator" data-v-1037eb5e>*</span> modelPosition<span class="token punctuation" data-v-1037eb5e>;</span>\n    vUv <span class="token operator" data-v-1037eb5e>=</span> u\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n\n</code></pre><div class="line-numbers" aria-hidden="true" data-v-1037eb5e><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div></div></div>',1),d=(0,s.uE)('<div class="language-glsl line-numbers-mode" data-ext="glsl" data-v-1037eb5e><pre class="language-glsl" data-v-1037eb5e><code data-v-1037eb5e><span class="token macro property" data-v-1037eb5e><span class="token directive-hash" data-v-1037eb5e>#</span> <span class="token directive keyword" data-v-1037eb5e>vertex</span><span class="token expression" data-v-1037eb5e>Shader</span></span>\n\n<span class="token keyword" data-v-1037eb5e>precision</span> <span class="token keyword" data-v-1037eb5e>lowp</span> <span class="token keyword" data-v-1037eb5e>float</span><span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uWaresFrequency<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uScale<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uNoiseFrequency<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uNoiseScale<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uXzScale<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uTime<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uXspeed<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uZspeed<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token keyword" data-v-1037eb5e>uniform</span> <span class="token keyword" data-v-1037eb5e>float</span> uNoiseSpeed<span class="token punctuation" data-v-1037eb5e>;</span>\n\n<span class="token comment" data-v-1037eb5e>// 计算出的高度传递给片元着色器</span>\n<span class="token keyword" data-v-1037eb5e>varying</span> <span class="token keyword" data-v-1037eb5e>float</span> vElevation<span class="token punctuation" data-v-1037eb5e>;</span>\n\n<span class="token comment" data-v-1037eb5e>// 随机函数</span>\n<span class="token keyword" data-v-1037eb5e>float</span> <span class="token function" data-v-1037eb5e>random</span> <span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec2</span> st<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>return</span> <span class="token function" data-v-1037eb5e>fract</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token function" data-v-1037eb5e>sin</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>st<span class="token punctuation" data-v-1037eb5e>.</span>xy<span class="token punctuation" data-v-1037eb5e>,</span><span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>12.9898</span><span class="token punctuation" data-v-1037eb5e>,</span><span class="token number" data-v-1037eb5e>78.233</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>*</span><span class="token number" data-v-1037eb5e>43758.5453123</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n<span class="token comment" data-v-1037eb5e>// 旋转函数</span>\n<span class="token keyword" data-v-1037eb5e>vec2</span> <span class="token function" data-v-1037eb5e>rotate</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec2</span> uv<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>float</span> rotation<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>vec2</span> mid<span class="token punctuation" data-v-1037eb5e>)</span>\n<span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>return</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>\n      <span class="token function" data-v-1037eb5e>cos</span><span class="token punctuation" data-v-1037eb5e>(</span>rotation<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> <span class="token punctuation" data-v-1037eb5e>(</span>uv<span class="token punctuation" data-v-1037eb5e>.</span>x <span class="token operator" data-v-1037eb5e>-</span> mid<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span> <span class="token function" data-v-1037eb5e>sin</span><span class="token punctuation" data-v-1037eb5e>(</span>rotation<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> <span class="token punctuation" data-v-1037eb5e>(</span>uv<span class="token punctuation" data-v-1037eb5e>.</span>y <span class="token operator" data-v-1037eb5e>-</span> mid<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span> mid<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>,</span>\n      <span class="token function" data-v-1037eb5e>cos</span><span class="token punctuation" data-v-1037eb5e>(</span>rotation<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> <span class="token punctuation" data-v-1037eb5e>(</span>uv<span class="token punctuation" data-v-1037eb5e>.</span>y <span class="token operator" data-v-1037eb5e>-</span> mid<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>-</span> <span class="token function" data-v-1037eb5e>sin</span><span class="token punctuation" data-v-1037eb5e>(</span>rotation<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> <span class="token punctuation" data-v-1037eb5e>(</span>uv<span class="token punctuation" data-v-1037eb5e>.</span>x <span class="token operator" data-v-1037eb5e>-</span> mid<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span> mid<span class="token punctuation" data-v-1037eb5e>.</span>y\n    <span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n<span class="token comment" data-v-1037eb5e>// 噪声函数</span>\n<span class="token keyword" data-v-1037eb5e>float</span> <span class="token function" data-v-1037eb5e>noise</span> <span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>in</span> <span class="token keyword" data-v-1037eb5e>vec2</span> _st<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> i <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>floor</span><span class="token punctuation" data-v-1037eb5e>(</span>_st<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> f <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>fract</span><span class="token punctuation" data-v-1037eb5e>(</span>_st<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n\n    <span class="token comment" data-v-1037eb5e>// Four corners in 2D of a tile</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> a <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>random</span><span class="token punctuation" data-v-1037eb5e>(</span>i<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> b <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>random</span><span class="token punctuation" data-v-1037eb5e>(</span>i <span class="token operator" data-v-1037eb5e>+</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>0.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> c <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>random</span><span class="token punctuation" data-v-1037eb5e>(</span>i <span class="token operator" data-v-1037eb5e>+</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>0.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> d <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>random</span><span class="token punctuation" data-v-1037eb5e>(</span>i <span class="token operator" data-v-1037eb5e>+</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n\n    <span class="token keyword" data-v-1037eb5e>vec2</span> u <span class="token operator" data-v-1037eb5e>=</span> f <span class="token operator" data-v-1037eb5e>*</span> f <span class="token operator" data-v-1037eb5e>*</span> <span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>3.0</span> <span class="token operator" data-v-1037eb5e>-</span> <span class="token number" data-v-1037eb5e>2.0</span> <span class="token operator" data-v-1037eb5e>*</span> f<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n\n    <span class="token keyword" data-v-1037eb5e>return</span> <span class="token function" data-v-1037eb5e>mix</span><span class="token punctuation" data-v-1037eb5e>(</span>a<span class="token punctuation" data-v-1037eb5e>,</span> b<span class="token punctuation" data-v-1037eb5e>,</span> u<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span>\n            <span class="token punctuation" data-v-1037eb5e>(</span>c <span class="token operator" data-v-1037eb5e>-</span> a<span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>*</span> u<span class="token punctuation" data-v-1037eb5e>.</span>y <span class="token operator" data-v-1037eb5e>*</span> <span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>1.0</span> <span class="token operator" data-v-1037eb5e>-</span> u<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span>\n            <span class="token punctuation" data-v-1037eb5e>(</span>d <span class="token operator" data-v-1037eb5e>-</span> b<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span> u<span class="token punctuation" data-v-1037eb5e>.</span>x <span class="token operator" data-v-1037eb5e>*</span> u<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n\n<span class="token comment" data-v-1037eb5e>//\tClassic Perlin 2D Noise</span>\n<span class="token comment" data-v-1037eb5e>//\tby Stefan Gustavson</span>\n<span class="token comment" data-v-1037eb5e>//</span>\n<span class="token keyword" data-v-1037eb5e>vec4</span> <span class="token function" data-v-1037eb5e>permute</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec4</span> x<span class="token punctuation" data-v-1037eb5e>)</span>\n<span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>return</span> <span class="token function" data-v-1037eb5e>mod</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token punctuation" data-v-1037eb5e>(</span>x<span class="token operator" data-v-1037eb5e>*</span><span class="token number" data-v-1037eb5e>34.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>+</span><span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>*</span>x<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>289.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n<span class="token keyword" data-v-1037eb5e>vec2</span> <span class="token function" data-v-1037eb5e>fade</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec2</span> t<span class="token punctuation" data-v-1037eb5e>)</span>\n<span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>return</span> t<span class="token operator" data-v-1037eb5e>*</span>t<span class="token operator" data-v-1037eb5e>*</span>t<span class="token operator" data-v-1037eb5e>*</span><span class="token punctuation" data-v-1037eb5e>(</span>t<span class="token operator" data-v-1037eb5e>*</span><span class="token punctuation" data-v-1037eb5e>(</span>t<span class="token operator" data-v-1037eb5e>*</span><span class="token number" data-v-1037eb5e>6.0</span><span class="token operator" data-v-1037eb5e>-</span><span class="token number" data-v-1037eb5e>15.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>+</span><span class="token number" data-v-1037eb5e>10.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n<span class="token keyword" data-v-1037eb5e>float</span> <span class="token function" data-v-1037eb5e>cnoise</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec2</span> P<span class="token punctuation" data-v-1037eb5e>)</span>\n<span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> Pi <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>floor</span><span class="token punctuation" data-v-1037eb5e>(</span>P<span class="token punctuation" data-v-1037eb5e>.</span>xyxy<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span> <span class="token keyword" data-v-1037eb5e>vec4</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>0.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>0.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> Pf <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>fract</span><span class="token punctuation" data-v-1037eb5e>(</span>P<span class="token punctuation" data-v-1037eb5e>.</span>xyxy<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>-</span> <span class="token keyword" data-v-1037eb5e>vec4</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token number" data-v-1037eb5e>0.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>0.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    Pi <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>mod</span><span class="token punctuation" data-v-1037eb5e>(</span>Pi<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token number" data-v-1037eb5e>289.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span> <span class="token comment" data-v-1037eb5e>// To avoid truncation effects in permutation</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> ix <span class="token operator" data-v-1037eb5e>=</span> Pi<span class="token punctuation" data-v-1037eb5e>.</span>xzxz<span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> iy <span class="token operator" data-v-1037eb5e>=</span> Pi<span class="token punctuation" data-v-1037eb5e>.</span>yyww<span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> fx <span class="token operator" data-v-1037eb5e>=</span> Pf<span class="token punctuation" data-v-1037eb5e>.</span>xzxz<span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> fy <span class="token operator" data-v-1037eb5e>=</span> Pf<span class="token punctuation" data-v-1037eb5e>.</span>yyww<span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> i <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>permute</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token function" data-v-1037eb5e>permute</span><span class="token punctuation" data-v-1037eb5e>(</span>ix<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>+</span> iy<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> gx <span class="token operator" data-v-1037eb5e>=</span> <span class="token number" data-v-1037eb5e>2.0</span> <span class="token operator" data-v-1037eb5e>*</span> <span class="token function" data-v-1037eb5e>fract</span><span class="token punctuation" data-v-1037eb5e>(</span>i <span class="token operator" data-v-1037eb5e>*</span> <span class="token number" data-v-1037eb5e>0.0243902439</span><span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>-</span> <span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>;</span> <span class="token comment" data-v-1037eb5e>// 1/41 = 0.024...</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> gy <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>abs</span><span class="token punctuation" data-v-1037eb5e>(</span>gx<span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>-</span> <span class="token number" data-v-1037eb5e>0.5</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> tx <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>floor</span><span class="token punctuation" data-v-1037eb5e>(</span>gx <span class="token operator" data-v-1037eb5e>+</span> <span class="token number" data-v-1037eb5e>0.5</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    gx <span class="token operator" data-v-1037eb5e>=</span> gx <span class="token operator" data-v-1037eb5e>-</span> tx<span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> g00 <span class="token operator" data-v-1037eb5e>=</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>gx<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>,</span>gy<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> g10 <span class="token operator" data-v-1037eb5e>=</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>gx<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>,</span>gy<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> g01 <span class="token operator" data-v-1037eb5e>=</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>gx<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token punctuation" data-v-1037eb5e>,</span>gy<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> g11 <span class="token operator" data-v-1037eb5e>=</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>gx<span class="token punctuation" data-v-1037eb5e>.</span>w<span class="token punctuation" data-v-1037eb5e>,</span>gy<span class="token punctuation" data-v-1037eb5e>.</span>w<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> norm <span class="token operator" data-v-1037eb5e>=</span> <span class="token number" data-v-1037eb5e>1.79284291400159</span> <span class="token operator" data-v-1037eb5e>-</span> <span class="token number" data-v-1037eb5e>0.85373472095314</span> <span class="token operator" data-v-1037eb5e>*</span> <span class="token keyword" data-v-1037eb5e>vec4</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g00<span class="token punctuation" data-v-1037eb5e>,</span> g00<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g01<span class="token punctuation" data-v-1037eb5e>,</span> g01<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g10<span class="token punctuation" data-v-1037eb5e>,</span> g10<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g11<span class="token punctuation" data-v-1037eb5e>,</span> g11<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    g00 <span class="token operator" data-v-1037eb5e>*=</span> norm<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>;</span>\n    g01 <span class="token operator" data-v-1037eb5e>*=</span> norm<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>;</span>\n    g10 <span class="token operator" data-v-1037eb5e>*=</span> norm<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token punctuation" data-v-1037eb5e>;</span>\n    g11 <span class="token operator" data-v-1037eb5e>*=</span> norm<span class="token punctuation" data-v-1037eb5e>.</span>w<span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> n00 <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g00<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>fx<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>,</span> fy<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> n10 <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g10<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>fx<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>,</span> fy<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> n01 <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g01<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>fx<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token punctuation" data-v-1037eb5e>,</span> fy<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> n11 <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>dot</span><span class="token punctuation" data-v-1037eb5e>(</span>g11<span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>fx<span class="token punctuation" data-v-1037eb5e>.</span>w<span class="token punctuation" data-v-1037eb5e>,</span> fy<span class="token punctuation" data-v-1037eb5e>.</span>w<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> fade_xy <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>fade</span><span class="token punctuation" data-v-1037eb5e>(</span>Pf<span class="token punctuation" data-v-1037eb5e>.</span>xy<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>vec2</span> n_x <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>mix</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>n00<span class="token punctuation" data-v-1037eb5e>,</span> n01<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>,</span> <span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>n10<span class="token punctuation" data-v-1037eb5e>,</span> n11<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>,</span> fade_xy<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>float</span> n_xy <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>mix</span><span class="token punctuation" data-v-1037eb5e>(</span>n_x<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token punctuation" data-v-1037eb5e>,</span> n_x<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>,</span> fade_xy<span class="token punctuation" data-v-1037eb5e>.</span>y<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n    <span class="token keyword" data-v-1037eb5e>return</span> <span class="token number" data-v-1037eb5e>2.3</span> <span class="token operator" data-v-1037eb5e>*</span> n_xy<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n\n\n<span class="token keyword" data-v-1037eb5e>void</span> <span class="token function" data-v-1037eb5e>main</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>{</span>\n    <span class="token keyword" data-v-1037eb5e>vec4</span> modelPosition <span class="token operator" data-v-1037eb5e>=</span> modelMatrix <span class="token operator" data-v-1037eb5e>*</span> <span class="token keyword" data-v-1037eb5e>vec4</span><span class="token punctuation" data-v-1037eb5e>(</span>position<span class="token punctuation" data-v-1037eb5e>,</span><span class="token number" data-v-1037eb5e>1.0</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n\n    <span class="token keyword" data-v-1037eb5e>float</span> elevation <span class="token operator" data-v-1037eb5e>=</span> <span class="token function" data-v-1037eb5e>sin</span><span class="token punctuation" data-v-1037eb5e>(</span>modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>x<span class="token operator" data-v-1037eb5e>*</span>uWaresFrequency<span class="token operator" data-v-1037eb5e>+</span>uTime<span class="token operator" data-v-1037eb5e>*</span>uXspeed<span class="token punctuation" data-v-1037eb5e>)</span><span class="token operator" data-v-1037eb5e>*</span><span class="token function" data-v-1037eb5e>sin</span><span class="token punctuation" data-v-1037eb5e>(</span>modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>z<span class="token operator" data-v-1037eb5e>*</span>uWaresFrequency<span class="token operator" data-v-1037eb5e>*</span>uXzScale<span class="token operator" data-v-1037eb5e>+</span>uTime<span class="token operator" data-v-1037eb5e>*</span>uZspeed<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>;</span>\n\n    elevation <span class="token operator" data-v-1037eb5e>+=</span> <span class="token operator" data-v-1037eb5e>-</span><span class="token function" data-v-1037eb5e>abs</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token function" data-v-1037eb5e>cnoise</span><span class="token punctuation" data-v-1037eb5e>(</span><span class="token keyword" data-v-1037eb5e>vec2</span><span class="token punctuation" data-v-1037eb5e>(</span>modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>xz<span class="token operator" data-v-1037eb5e>*</span>uNoiseFrequency<span class="token operator" data-v-1037eb5e>+</span>uTime<span class="token operator" data-v-1037eb5e>*</span>uNoiseSpeed<span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span><span class="token punctuation" data-v-1037eb5e>)</span> <span class="token operator" data-v-1037eb5e>*</span>uNoiseScale<span class="token punctuation" data-v-1037eb5e>;</span>\n\n    vElevation <span class="token operator" data-v-1037eb5e>=</span> elevation<span class="token punctuation" data-v-1037eb5e>;</span>\n\n    elevation <span class="token operator" data-v-1037eb5e>*=</span> uScale<span class="token punctuation" data-v-1037eb5e>;</span>\n\n\n\n    modelPosition<span class="token punctuation" data-v-1037eb5e>.</span>y <span class="token operator" data-v-1037eb5e>+=</span> elevation<span class="token punctuation" data-v-1037eb5e>;</span>\n\n    gl_Position <span class="token operator" data-v-1037eb5e>=</span> projectionMatrix <span class="token operator" data-v-1037eb5e>*</span> viewMatrix <span class="token operator" data-v-1037eb5e>*</span>modelPosition<span class="token punctuation" data-v-1037eb5e>;</span>\n<span class="token punctuation" data-v-1037eb5e>}</span>\n</code></pre><div class="line-numbers" aria-hidden="true" data-v-1037eb5e><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div><div class="line-number" data-v-1037eb5e></div></div></div>',1),v={__name:"water_smoke_cloud.html",setup(a){let n;const v=(0,t.iH)(),l=(0,t.iH)();return(0,s.bv)((async()=>{n=await e.e(464).then(e.bind(e,70464)),(()=>{const a=new n.GUI,e=new o.xsS,s=new o.cPb(90,2,.1,1e3);s.position.set(0,0,2),e.add(s);const t={uWaresFrequency:14,uScale:.03,uXzScale:1.5,uNoiseFrequency:10,uNoiseScale:1.5,uLowColor:"#ff0000",uHighColor:"#ffff00",uXspeed:1,uZspeed:1,uNoiseSpeed:1,uOpacity:1},c=new o.jyz({vertexShader:"\nprecision lowp float;\nuniform float uWaresFrequency;\nuniform float uScale;\nuniform float uNoiseFrequency;\nuniform float uNoiseScale;\nuniform float uXzScale;\nuniform float uTime;\nuniform float uXspeed;\nuniform float uZspeed;\nuniform float uNoiseSpeed;\n\n// 计算出的高度传递给片元着色器\nvarying float vElevation;\n\n// 随机函数\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);\n}\n\n// 旋转函数\nvec2 rotate(vec2 uv, float rotation, vec2 mid)\n{\n    return vec2(\n      cos(rotation) * (uv.x - mid.x) + sin(rotation) * (uv.y - mid.y) + mid.x,\n      cos(rotation) * (uv.y - mid.y) - sin(rotation) * (uv.x - mid.x) + mid.y\n    );\n}\n\n// 噪声函数\nfloat noise (in vec2 _st) {\n    vec2 i = floor(_st);\n    vec2 f = fract(_st);\n\n    // Four corners in 2D of a tile\n    float a = random(i);\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n\n    vec2 u = f * f * (3.0 - 2.0 * f);\n\n    return mix(a, b, u.x) +\n            (c - a)* u.y * (1.0 - u.x) +\n            (d - b) * u.x * u.y;\n}\n\n\n//\tClassic Perlin 2D Noise \n//\tby Stefan Gustavson\n//\nvec4 permute(vec4 x)\n{\n    return mod(((x*34.0)+1.0)*x, 289.0);\n}\n\nvec2 fade(vec2 t)\n{\n    return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\nfloat cnoise(vec2 P)\n{\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n    vec4 i = permute(permute(ix) + iy);\n    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n    vec4 gy = abs(gx) - 0.5;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n    vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n}\n\n\nvoid main(){\n    vec4 modelPosition = modelMatrix * vec4(position,1.0);\n\n    float elevation = sin(modelPosition.x*uWaresFrequency+uTime*uXspeed)*sin(modelPosition.z*uWaresFrequency*uXzScale+uTime*uZspeed);\n\n    elevation += -abs(cnoise(vec2(modelPosition.xz*uNoiseFrequency+uTime*uNoiseSpeed))) *uNoiseScale;\n    \n    vElevation = elevation;\n    \n    elevation *= uScale;\n\n    \n\n    modelPosition.y += elevation;\n\n    gl_Position = projectionMatrix * viewMatrix *modelPosition;\n}\n\n",fragmentShader:"\nprecision lowp float;\n\nuniform vec3 uHighColor;\nuniform vec3 uLowColor;\nvarying float vElevation;\nuniform float uOpacity;\n\nvoid main(){\n    float a = (vElevation+1.0)/2.0;\n    vec3 color = mix(uLowColor,uHighColor,a);\n    gl_FragColor = vec4(color,uOpacity);\n}\n",side:o.ehD,uniforms:{uWaresFrequency:{value:t.uWaresFrequency},uScale:{value:t.uScale},uNoiseFrequency:{value:t.uNoiseFrequency},uNoiseScale:{value:t.uNoiseScale},uXzScale:{value:t.uXzScale},uTime:{value:t.uTime},uLowColor:{value:new o.Ilk(t.uLowColor)},uHighColor:{value:new o.Ilk(t.uHighColor)},uXspeed:{value:t.uXspeed},uZspeed:{value:t.uZspeed},uNoiseSpeed:{value:t.uNoiseSpeed},uOpacity:{value:t.uOpacity}},transparent:!0});a.add(t,"uWaresFrequency").min(1).max(100).step(.1).onChange((a=>{c.uniforms.uWaresFrequency.value=a})),a.add(t,"uScale").min(0).max(.2).step(.001).onChange((a=>{c.uniforms.uScale.value=a})),a.add(t,"uNoiseFrequency").min(1).max(100).step(.1).onChange((a=>{c.uniforms.uNoiseFrequency.value=a})),a.add(t,"uNoiseScale").min(0).max(5).step(.001).onChange((a=>{c.uniforms.uNoiseScale.value=a})),a.add(t,"uXzScale").min(0).max(5).step(.1).onChange((a=>{c.uniforms.uXzScale.value=a})),a.addColor(t,"uLowColor").onFinishChange((a=>{c.uniforms.uLowColor.value=new o.Ilk(a)})),a.addColor(t,"uHighColor").onFinishChange((a=>{c.uniforms.uHighColor.value=new o.Ilk(a)})),a.add(t,"uXspeed").min(0).max(5).step(.001).onChange((a=>{c.uniforms.uXspeed.value=a})),a.add(t,"uZspeed").min(0).max(5).step(.001).onChange((a=>{c.uniforms.uZspeed.value=a})),a.add(t,"uNoiseSpeed").min(0).max(5).step(.001).onChange((a=>{c.uniforms.uNoiseSpeed.value=a})),a.add(t,"uOpacity").min(0).max(1).step(.01).onChange((a=>{c.uniforms.uOpacity.value=a}));const d=new o.Kj0(new o.BKK(1,1,1024,1024),c);d.rotation.x=-Math.PI/2,e.add(d);const l=new o.CP7;l.setSize(v.value.offsetWidth,v.value.offsetWidth/2),window.addEventListener("resize",(()=>{l.setSize(v.value.offsetWidth,v.value.offsetWidth/2),l.setPixelRatio(window.devicePixelRatio)})),v.value.appendChild(l.domElement),v.value.appendChild(a.domElement),a.domElement.style.position="absolute",a.domElement.style.top="0px",a.domElement.style.right="0px",new p.z(s,l.domElement).enableDamping=!0;const i=new o.SUY;!function a(n){const t=i.getElapsedTime();c.uniforms.uTime.value=t,requestAnimationFrame(a),l.render(e,s)}()})(),(()=>{const a=new n.GUI,e=new o.xsS,s=new o.cPb(90,2,.1,1e3);s.position.set(0,0,2),e.add(s);const t=(new o.dpR).load("/assets/textures/ca.jpeg"),c={uFrequency:10,uScale:.1},d=new o.jyz({vertexShader:"\n      uniform vec3 uColor;\n      uniform float uFrequency;\n      uniform float uScale;\n      uniform float uTime;\n\n      varying float vElevation;\n      varying vec2 vUv;\n\n      // highp -2^16-2^16\n      // mediump = -2^10-2^10\n      // lowp -2^8-2^8\n      precision highp float;\n      void main(){\n          vec4 modelPosition = modelMatrix * vec4( position, 1.0 );\n\n          modelPosition.z += sin((modelPosition.x+uTime) * uFrequency)*uScale ;\n          modelPosition.z += cos((modelPosition.y+uTime) * uFrequency)*uScale ;\n\n          vElevation = modelPosition.z;\n          gl_Position =  projectionMatrix * viewMatrix * modelPosition;\n          vUv = uv;\n\n      }\n\n    ",fragmentShader:"\n      uniform vec3 uColor;\n      varying float vElevation;\n      precision highp float;\n      varying vec2 vUv;\n\n      uniform sampler2D uTexture;\n      void main(){\n          float alpha = (vElevation+0.1)+0.8;\n          vec4 textureColor = texture2D(uTexture,vUv);\n          textureColor.rgb*=alpha;\n          gl_FragColor = textureColor;\n      }\n\n    ",uniforms:{uColor:{value:new o.Ilk("purple")},uFrequency:{value:c.uFrequency},uScale:{value:c.uScale},uTime:{value:0},uTexture:{value:t}},side:o.ehD,transparent:!0});a.add(c,"uFrequency").min(0).max(50).step(.1).onChange((a=>{d.uniforms.uFrequency.value=a})),a.add(c,"uScale").min(0).max(1).step(.01).onChange((a=>{d.uniforms.uScale.value=a}));const v=new o.Kj0(new o.BKK(1,1,64,64),d);e.add(v);const i=new o.CP7;i.setSize(l.value.offsetWidth,l.value.offsetWidth/2),l.value.appendChild(i.domElement),l.value.appendChild(a.domElement),a.domElement.style.position="absolute",a.domElement.style.top="0px",a.domElement.style.right="0px",window.addEventListener("resize",(()=>{i.setSize(l.value.offsetWidth,l.value.offsetWidth/2),i.setPixelRatio(window.devicePixelRatio)})),new p.z(s,i.domElement).enableDamping=!0;const u=new o.SUY;!function a(n){const t=u.getElapsedTime();d.uniforms.uTime.value=t,requestAnimationFrame(a),i.render(e,s)}()})()})),(a,n)=>((0,s.wg)(),(0,s.iD)("div",null,[c,(0,s._)("div",{ref_key:"float",ref:l,class:"fog_dom"},null,512),d,(0,s._)("div",{ref_key:"fog",ref:v,class:"fog_dom"},null,512)]))}},l=(0,e(61935).Z)(v,[["__scopeId","data-v-1037eb5e"]])},61935:(a,n)=>{n.Z=(a,n)=>{const e=a.__vccOpts||a;for(const[a,s]of n)e[a]=s;return e}},76547:(a,n,e)=>{e.r(n),e.d(n,{data:()=>s});const s=JSON.parse('{"key":"v-24a1f354","path":"/glsl/water_smoke_cloud.html","title":"水烟雾云","lang":"zh-CN","frontmatter":{"title":"水烟雾云","date":"2022-10-11T00:00:00.000Z","category":["GLSL"],"summary":"import {ref,onMounted} from \'vue\' import * as THREE from \\"three\\"; import { OrbitControls } from \\"three/examples/jsm/controls/OrbitControls\\"; let dat; const fog = ref() const vertex","head":[["meta",{"property":"og:url","content":"https://luxiag.github.io/glsl/water_smoke_cloud.html"}],["meta",{"property":"og:title","content":"水烟雾云"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2023-04-18T09:35:08.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:published_time","content":"2022-10-11T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-18T09:35:08.000Z"}]]},"excerpt":"","headers":[],"git":{"createdTime":1681810508000,"updatedTime":1681810508000,"contributors":[{"name":"卢祥","email":"example@qq.com","commits":1}]},"readingTime":{"minutes":5.86,"words":1757},"filePathRelative":"glsl/water_smoke_cloud.md","localizedDate":"2022年10月11日"}')}}]);