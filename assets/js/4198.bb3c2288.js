"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[4198],{61935:(t,e)=>{e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[t,i]of e)n[t]=i;return n}},55172:(t,e,n)=>{n.d(e,{Ys:()=>u});var i=n(86171);const o=new i.iMs,s=new i.Pa4,a=new i.Pa4,r=new i._fP,h={X:new i.Pa4(1,0,0),Y:new i.Pa4(0,1,0),Z:new i.Pa4(0,0,1)},l={type:"change"},c={type:"mouseDown"},p={type:"mouseUp",mode:null},d={type:"objectChange"};class u extends i.Tme{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.isTransformControls=!0,this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const n=new Z;this._gizmo=n,this.add(n);const o=new z;this._plane=o,this.add(o);const s=this;function a(t,e){let i=e;Object.defineProperty(s,t,{get:function(){return void 0!==i?i:e},set:function(e){i!==e&&(i=e,o[t]=e,n[t]=e,s.dispatchEvent({type:t+"-changed",value:e}),s.dispatchEvent(l))}}),s[t]=e,o[t]=e,n[t]=e}a("camera",t),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const r=new i.Pa4,h=new i.Pa4,c=new i._fP,p=new i._fP,d=new i.Pa4,u=new i._fP,P=new i.Pa4,x=new i.Pa4,b=new i.Pa4,g=new i.Pa4;a("worldPosition",r),a("worldPositionStart",h),a("worldQuaternion",c),a("worldQuaternionStart",p),a("cameraPosition",d),a("cameraQuaternion",u),a("pointStart",P),a("pointEnd",x),a("rotationAxis",b),a("rotationAngle",0),a("eye",g),this._offset=new i.Pa4,this._startNorm=new i.Pa4,this._endNorm=new i.Pa4,this._cameraScale=new i.Pa4,this._parentPosition=new i.Pa4,this._parentQuaternion=new i._fP,this._parentQuaternionInv=new i._fP,this._parentScale=new i.Pa4,this._worldScaleStart=new i.Pa4,this._worldQuaternionInv=new i._fP,this._worldScale=new i.Pa4,this._positionStart=new i.Pa4,this._quaternionStart=new i._fP,this._scaleStart=new i.Pa4,this._getPointer=m.bind(this),this._onPointerDown=f.bind(this),this._onPointerHover=w.bind(this),this._onPointerMove=y.bind(this),this._onPointerUp=v.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;o.setFromCamera(t,this.camera);const e=P(this._gizmo.picker[this.mode],o);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){o.setFromCamera(t,this.camera);const e=P(this._plane,o,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,c.mode=this.mode,this.dispatchEvent(c)}}pointerMove(t){const e=this.axis,n=this.mode,i=this.object;let c=this.space;if("scale"===n?c="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(c="world"),void 0===i||null===e||!1===this.dragging||-1!==t.button)return;o.setFromCamera(t,this.camera);const p=P(this._plane,o,!0);if(p){if(this.pointEnd.copy(p.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===c&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===c&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===c&&(i.position.applyQuaternion(r.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===c&&(i.parent&&i.position.add(s.setFromMatrixPosition(i.parent.matrixWorld)),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(s.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),a.set(t,t,t)}else s.copy(this.pointStart),a.copy(this.pointEnd),s.applyQuaternion(this._worldQuaternionInv),a.applyQuaternion(this._worldQuaternionInv),a.divide(s),-1===e.search("X")&&(a.x=1),-1===e.search("Y")&&(a.y=1),-1===e.search("Z")&&(a.z=1);i.scale.copy(this._scaleStart).multiply(a),this.scaleSnap&&(-1!==e.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(s.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(s.copy(this.rotationAxis).cross(this.eye))*t):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(h[e]),s.copy(h[e]),"local"===c&&s.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(s.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===c&&"E"!==e&&"XYZE"!==e?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(r.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(r.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(l),this.dispatchEvent(d)}}pointerUp(t){0===t.button&&(this.dragging&&null!==this.axis&&(p.mode=this.mode,this.dispatchEvent(p)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(l),this.dispatchEvent(d),this.pointStart.copy(this.pointEnd))}getRaycaster(){return o}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}}function m(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function w(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function f(t){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function y(t){this.enabled&&this.pointerMove(this._getPointer(t))}function v(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function P(t,e,n){const i=e.intersectObject(t,!0);for(let t=0;t<i.length;t++)if(i[t].object.visible||n)return i[t];return!1}const x=new i.USm,b=new i.Pa4(0,1,0),g=new i.Pa4(0,0,0),M=new i.yGw,_=new i._fP,S=new i._fP,j=new i.Pa4,I=new i.yGw,E=new i.Pa4(1,0,0),X=new i.Pa4(0,1,0),K=new i.Pa4(0,0,1),Q=new i.Pa4,Y=new i.Pa4,A=new i.Pa4;class Z extends i.Tme{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const t=new i.vBJ({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new i.nls({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;const o=e.clone();o.opacity=.5;const s=t.clone();s.color.setHex(16711680);const a=t.clone();a.color.setHex(65280);const r=t.clone();r.color.setHex(255);const h=t.clone();h.color.setHex(16711680),h.opacity=.5;const l=t.clone();l.color.setHex(65280),l.opacity=.5;const c=t.clone();c.color.setHex(255),c.opacity=.5;const p=t.clone();p.opacity=.25;const d=t.clone();d.color.setHex(16776960),d.opacity=.25,t.clone().color.setHex(16776960);const u=t.clone();u.color.setHex(7895160);const m=new i.fHI(0,.04,.1,12);m.translate(0,.05,0);const w=new i.DvJ(.08,.08,.08);w.translate(0,.04,0);const f=new i.u9r;f.setAttribute("position",new i.a$l([0,0,0,1,0,0],3));const y=new i.fHI(.0075,.0075,.5,3);function v(t,e){const n=new i.XvJ(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}y.translate(0,.25,0);const P={X:[[new i.Kj0(m,s),[.5,0,0],[0,0,-Math.PI/2]],[new i.Kj0(m,s),[-.5,0,0],[0,0,Math.PI/2]],[new i.Kj0(y,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new i.Kj0(m,a),[0,.5,0]],[new i.Kj0(m,a),[0,-.5,0],[Math.PI,0,0]],[new i.Kj0(y,a)]],Z:[[new i.Kj0(m,r),[0,0,.5],[Math.PI/2,0,0]],[new i.Kj0(m,r),[0,0,-.5],[-Math.PI/2,0,0]],[new i.Kj0(y,r),null,[Math.PI/2,0,0]]],XYZ:[[new i.Kj0(new i.pQR(.1,0),p.clone()),[0,0,0]]],XY:[[new i.Kj0(new i.DvJ(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new i.Kj0(new i.DvJ(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.Kj0(new i.DvJ(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},x={X:[[new i.Kj0(new i.fHI(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new i.Kj0(new i.fHI(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,.3,0]],[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new i.Kj0(new i.pQR(.2,0),n)]],XY:[[new i.Kj0(new i.DvJ(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new i.Kj0(new i.DvJ(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.Kj0(new i.DvJ(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},b={START:[[new i.Kj0(new i.pQR(.01,2),o),null,null,null,"helper"]],END:[[new i.Kj0(new i.pQR(.01,2),o),null,null,null,"helper"]],DELTA:[[new i.x12(function(){const t=new i.u9r;return t.setAttribute("position",new i.a$l([0,0,0,1,1,1],3)),t}(),o),null,null,null,"helper"]],X:[[new i.x12(f,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i.x12(f,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i.x12(f,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},g={XYZE:[[new i.Kj0(v(.5,1),u),null,[0,Math.PI/2,0]]],X:[[new i.Kj0(v(.5,.5),s)]],Y:[[new i.Kj0(v(.5,.5),a),null,[0,0,-Math.PI/2]]],Z:[[new i.Kj0(v(.5,.5),r),null,[0,Math.PI/2,0]]],E:[[new i.Kj0(v(.75,1),d),null,[0,Math.PI/2,0]]]},M={AXIS:[[new i.x12(f,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},_={XYZE:[[new i.Kj0(new i.xo$(.25,10,8),n)]],X:[[new i.Kj0(new i.XvJ(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new i.Kj0(new i.XvJ(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new i.Kj0(new i.XvJ(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new i.Kj0(new i.XvJ(.75,.1,2,24),n)]]},S={X:[[new i.Kj0(w,s),[.5,0,0],[0,0,-Math.PI/2]],[new i.Kj0(y,s),[0,0,0],[0,0,-Math.PI/2]],[new i.Kj0(w,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new i.Kj0(w,a),[0,.5,0]],[new i.Kj0(y,a)],[new i.Kj0(w,a),[0,-.5,0],[0,0,Math.PI]]],Z:[[new i.Kj0(w,r),[0,0,.5],[Math.PI/2,0,0]],[new i.Kj0(y,r),[0,0,0],[Math.PI/2,0,0]],[new i.Kj0(w,r),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new i.Kj0(new i.DvJ(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new i.Kj0(new i.DvJ(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.Kj0(new i.DvJ(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new i.Kj0(new i.DvJ(.1,.1,.1),p.clone())]]},j={X:[[new i.Kj0(new i.fHI(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new i.Kj0(new i.fHI(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,.3,0]],[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new i.Kj0(new i.fHI(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new i.Kj0(new i.DvJ(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new i.Kj0(new i.DvJ(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.Kj0(new i.DvJ(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new i.Kj0(new i.DvJ(.2,.2,.2),n),[0,0,0]]]},I={X:[[new i.x12(f,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i.x12(f,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i.x12(f,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function E(t){const e=new i.Tme;for(const n in t)for(let i=t[n].length;i--;){const o=t[n][i][0].clone(),s=t[n][i][1],a=t[n][i][2],r=t[n][i][3],h=t[n][i][4];o.name=n,o.tag=h,s&&o.position.set(s[0],s[1],s[2]),a&&o.rotation.set(a[0],a[1],a[2]),r&&o.scale.set(r[0],r[1],r[2]),o.updateMatrix();const l=o.geometry.clone();l.applyMatrix4(o.matrix),o.geometry=l,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),e.add(o)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=E(P)),this.add(this.gizmo.rotate=E(g)),this.add(this.gizmo.scale=E(S)),this.add(this.picker.translate=E(x)),this.add(this.picker.rotate=E(_)),this.add(this.picker.scale=E(j)),this.add(this.helper.translate=E(b)),this.add(this.helper.rotate=E(M)),this.add(this.helper.scale=E(I)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:S;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let t=0;t<n.length;t++){const i=n[t];let o;if(i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),o=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(o*this.size/4),"helper"!==i.tag){if(i.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){const t=.99,n=.2;"X"===i.name&&Math.abs(b.copy(E).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"===i.name&&Math.abs(b.copy(X).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"===i.name&&Math.abs(b.copy(K).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(b.copy(K).applyQuaternion(e).dot(this.eye))<n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(b.copy(E).applyQuaternion(e).dot(this.eye))<n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(b.copy(X).applyQuaternion(e).dot(this.eye))<n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1)}else"rotate"===this.mode&&(_.copy(e),b.copy(this.eye).applyQuaternion(r.copy(e).invert()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(M.lookAt(this.eye,g,X)),"X"===i.name&&(r.setFromAxisAngle(E,Math.atan2(-b.y,b.z)),r.multiplyQuaternions(_,r),i.quaternion.copy(r)),"Y"===i.name&&(r.setFromAxisAngle(X,Math.atan2(b.x,b.z)),r.multiplyQuaternions(_,r),i.quaternion.copy(r)),"Z"===i.name&&(r.setFromAxisAngle(K,Math.atan2(b.y,b.x)),r.multiplyQuaternions(_,r),i.quaternion.copy(r)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._color=i.material._color||i.material.color.clone(),i.material._opacity=i.material._opacity||i.material.opacity,i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled&&this.axis&&(i.name===this.axis||this.axis.split("").some((function(t){return i.name===t})))&&(i.material.color.setHex(16776960),i.material.opacity=1)}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(r.setFromEuler(x.set(0,0,0)),i.quaternion.copy(e).multiply(r),Math.abs(b.copy(E).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(r.setFromEuler(x.set(0,0,Math.PI/2)),i.quaternion.copy(e).multiply(r),Math.abs(b.copy(X).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(r.setFromEuler(x.set(0,Math.PI/2,0)),i.quaternion.copy(e).multiply(r),Math.abs(b.copy(K).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(r.setFromEuler(x.set(0,Math.PI/2,0)),b.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(M.lookAt(g,b,X)),i.quaternion.multiply(r),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),s.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),s.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy(s),i.visible=this.dragging):(i.quaternion.copy(e),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}super.updateMatrixWorld(t)}}class z extends i.Kj0{constructor(){super(new i._12(1e5,1e5,2,2),new i.vBJ({visible:!1,wireframe:!0,side:i.ehD,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),Q.copy(E).applyQuaternion("local"===e?this.worldQuaternion:S),Y.copy(X).applyQuaternion("local"===e?this.worldQuaternion:S),A.copy(K).applyQuaternion("local"===e?this.worldQuaternion:S),b.copy(Y),this.mode){case"translate":case"scale":switch(this.axis){case"X":b.copy(this.eye).cross(Q),j.copy(Q).cross(b);break;case"Y":b.copy(this.eye).cross(Y),j.copy(Y).cross(b);break;case"Z":b.copy(this.eye).cross(A),j.copy(A).cross(b);break;case"XY":j.copy(A);break;case"YZ":j.copy(Q);break;case"XZ":b.copy(A),j.copy(Y);break;case"XYZ":case"E":j.set(0,0,0)}break;default:j.set(0,0,0)}0===j.length()?this.quaternion.copy(this.cameraQuaternion):(I.lookAt(s.set(0,0,0),j,b),this.quaternion.setFromRotationMatrix(I)),super.updateMatrixWorld(t)}}},55939:(t,e,n)=>{n.d(e,{M:()=>o});var i=n(86171);class o extends i.O7d{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(i,e)}this.type="TextGeometry"}}},43891:(t,e,n)=>{n.d(e,{J:()=>o});var i=n(86171);class o extends i.aNw{constructor(t){super(t)}load(t,e,n,o){const s=this,a=new i.hH6(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(t){const n=s.parse(JSON.parse(t));e&&e(n)}),n,o)}parse(t){return new s(t)}}class s{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],i=function(t,e,n){const i=Array.from(t),o=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,r=[];let h=0,l=0;for(let t=0;t<i.length;t++){const e=i[t];if("\n"===e)h=0,l-=s;else{const t=a(e,o,h,l,n);h+=t.offsetX,r.push(t.path)}}return r}(t,e,this.data);for(let t=0,e=i.length;t<e;t++)n.push(...i[t].toShapes());return n}}function a(t,e,n,o,s){const a=s.glyphs[t]||s.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+s.familyName+".");const r=new i.T_1;let h,l,c,p,d,u,m,w;if(a.o){const t=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let i=0,s=t.length;i<s;)switch(t[i++]){case"m":h=t[i++]*e+n,l=t[i++]*e+o,r.moveTo(h,l);break;case"l":h=t[i++]*e+n,l=t[i++]*e+o,r.lineTo(h,l);break;case"q":c=t[i++]*e+n,p=t[i++]*e+o,d=t[i++]*e+n,u=t[i++]*e+o,r.quadraticCurveTo(d,u,c,p);break;case"b":c=t[i++]*e+n,p=t[i++]*e+o,d=t[i++]*e+n,u=t[i++]*e+o,m=t[i++]*e+n,w=t[i++]*e+o,r.bezierCurveTo(d,u,m,w,c,p)}}return{offsetX:a.ha*e,path:r}}},55529:(t,e,n)=>{n.d(e,{Zw:()=>a});var i=n(86171);const o=1024;function s(t,e,n,i,o,s){const a=t.image,{data:r}=a,h=4096*s;r[4*e+h+0]=n,r[4*e+h+1]=i,r[4*e+h+2]=o,r[4*e+h+3]=1}class a{constructor(t,e=1){const n=t.clone(),s=function(t=1){const e=new Float32Array(4096*t*4),n=new i.IEO(e,o,4*t,i.wk1,i.VzW);return n.wrapS=i.rpg,n.wrapY=i.rpg,n.magFilter=i.TyD,n.needsUpdate=!0,n}(e),a={spineTexture:{value:s},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}};n.traverse((function(t){(t instanceof i.Kj0||t instanceof i.SPe)&&(t.material=t.material.clone(),function(t,e,n=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=t=>{if(t.__modified)return;t.__modified=!0,Object.assign(t.uniforms,e);const i=`\n\t\tuniform sampler2D spineTexture;\n\t\tuniform float pathOffset;\n\t\tuniform float pathSegment;\n\t\tuniform float spineOffset;\n\t\tuniform float spineLength;\n\t\tuniform int flow;\n\n\t\tfloat textureLayers = ${4*n}.;\n\t\tfloat textureStacks = 1.;\n\n\t\t${t.vertexShader}\n\t\t`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,"\nvoid main() {\n#include <beginnormal_vertex>\n\nvec4 worldPos = modelMatrix * vec4(position, 1.);\n\nbool bend = flow > 0;\nfloat xWeight = bend ? 0. : 1.;\n\n#ifdef USE_INSTANCING\nfloat pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\nfloat spineLengthFromInstanceMatrix = instanceMatrix[3][0];\nfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\nfloat mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\n#else\nfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\nfloat mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\n#endif\n\nmt = mod(mt, textureStacks);\nfloat rowOffset = floor(mt);\n\n#ifdef USE_INSTANCING\nrowOffset += instanceMatrix[3][1] * 4.;\n#endif\n\nvec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\nvec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\nvec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\nvec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\nmat3 basis = mat3(a, b, c);\n\nvec3 transformed = basis\n\t* vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\n\t+ spinePos;\n\nvec3 transformedNormal = normalMatrix * (basis * objectNormal);\n\t\t\t").replace("#include <project_vertex>","vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;");t.vertexShader=i})}(t.material,a,e))})),this.curveArray=new Array(e),this.curveLengthArray=new Array(e),this.object3D=n,this.splineTexure=s,this.uniforms=a}updateCurve(t,e){if(t>=this.curveArray.length)throw Error("Index out of range for Flow");const n=e.getLength();this.uniforms.spineLength.value=n,this.curveLengthArray[t]=n,this.curveArray[t]=e,function(t,e,n=0){const i=Math.floor(1024);e.arcLengthDivisions=i/2,e.updateArcLengths();const a=e.getSpacedPoints(i),r=e.computeFrenetFrames(i,!0);for(let e=0;e<i;e++){const i=Math.floor(e/o),h=e%o;let l=a[e];s(t,h,l.x,l.y,l.z,0+i+4*n),l=r.tangents[e],s(t,h,l.x,l.y,l.z,1+i+4*n),l=r.normals[e],s(t,h,l.x,l.y,l.z,2+i+4*n),l=r.binormals[e],s(t,h,l.x,l.y,l.z,3+i+4*n)}t.needsUpdate=!0}(this.splineTexure,e,t)}moveAlongCurve(t){this.uniforms.pathOffset.value+=t}}new i.yGw}}]);