"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8926],{69098:(a,n,s)=>{s.r(n),s.d(n,{default:()=>f});var e=s(71534);const t=s.p+"assets/img/089004202011242323.a40760f6.png",p=s.p+"assets/img/838004802011242323.95f4174a.png",i=s.p+"assets/img/268000003011242323.17f146da.png",l=s.p+"assets/img/041000405031052323.219084e8.png",o=s.p+"assets/img/201003003011242323.a353a53a.png",r=s.p+"assets/img/487003503011242323.55677874.png",d=s.p+"assets/img/704001205031052323.abf4579b.png",c=s.p+"assets/img/426000805031052323.b8e4aa74.png",u=s.p+"assets/img/409000805031052323.5297df7f.png",m=s.p+"assets/img/153001405031052323.795bb8e9.png",g=s.p+"assets/img/091001605031052323.0992846a.png",k={href:"https://nativesupport.dcloud.net.cn/AppDocs/#",target:"_blank",rel:"noopener noreferrer"},v={href:"https://www.oracle.com/java/technologies/downloads/",target:"_blank",rel:"noopener noreferrer"},b=(0,e.uE)('<p><img src="'+t+'" alt=""></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/usr/libexec/java_home <span class="token parameter variable">-V</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="'+p+'" alt=""></p><p>2.生成签名证书</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-alias</span> testalias <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keysize</span> <span class="token number">2048</span> <span class="token parameter variable">-validity</span> <span class="token number">36500</span> <span class="token parameter variable">-keystore</span> test.keystore\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="'+i+'" alt=""></p><p>3.查看证书</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-list</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-keystore</span> test.keystore\nEnter keystore password: //输入密码，回车\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>4.生成 AppKey</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-list</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-keystore</span> test.keystore\nEnter keystore password: //输入密码，回车\n\n<span class="token comment"># 新版没有md5</span>\nkeytool <span class="token parameter variable">-exportcert</span> <span class="token parameter variable">-keystore</span> xxx.keystore <span class="token operator">|</span> openssl dgst <span class="token parameter variable">-md5</span>\n<span class="token comment"># 参考 https://www.jianshu.com/p/3799489898b3</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>包名必须和 android studio 项目的包名一致</strong></p><p><img src="'+l+'" alt=""></p><p>5.下载离线 SDK</p><p>hbuilderX 版本要和 SDK 保持一致</p>',14),h={href:"https://nativesupport.dcloud.net.cn/AppDocs/download/android.html#",target:"_blank",rel:"noopener noreferrer"},y=(0,e.uE)('<p>6.android 创建项目</p><p>创建项目的包名必须和 Dclound 里的包名一致</p><p><img src="'+o+'" alt=""></p><ul><li><p><code>.gradle 和.idea</code>在这两个目录下放置的都是 Android Studio 自动生成的文件，所以无需关心，不用编辑。</p></li><li><p><code>app</code>项目中的代码、资源等内容几乎都是放在这个目录之下，后续的开发工作也是在这个目录下进行的。</p><ul><li><p><img src="'+r+'" alt=""></p></li><li><p><code>build</code>和外层的 build 一样，包含了一些编译时自动生成的文件，无需关心。</p></li><li><p><code>libs</code>如果你在项目中使用到了第三方 jar 包，就需要把这些 jar 包放置在 libs 目录之下，放置之后，jar 包会被自动添加到构建路径里面去。</p></li><li><p><code>androidTest</code>用来编写 Android Test 测试用例的，对项目进行一些自动化测试。</p></li><li><p><code>java</code>放置我们所有 java 代码的地方。</p></li><li><p><code>res</code>内容巨多，你在项目中用到的所有图片、布局、字符串等等资源都要存放在这个目录下。</p></li><li><p><code>AndroidMainifest.xml</code>整个 Android 项目的配置文件，你在程序中定义的所有四大组件都需要在这个文件中注册，另外可以在这个文件中给应用程序添加权限声明。</p></li><li><p><code>test</code>用来编写 Unit Test 测试用例的，是对项目自动化测试的另一种方式。</p></li><li><p><code>gitignore</code>和外层的 gitignore 文件类似，也是用来将指定目录或文件排除在版本控制之外的</p></li><li><p><code>build.gradle</code>这是 app 模块中的 gradle 构建脚本，会指定很多项目构建的相关配置。</p></li><li><p><code>proguard-rules.pro</code>用于指定项目代码的混淆规则，当代码开发完打包成安装包之后，如果不希望代码被别人破解，通常会对代码进行混淆，从而让破解者难以阅读。</p></li></ul></li><li><p><code>gradle</code>这个目录之下包含了 gradle wrapper 的配置文件，使用 gradle wrapper 的方式不需要提前将 gradle 下载好，而是会自动根据本地的缓存情况决定是否需要联网下载 gradle。</p></li><li><p><code>gitignore</code>这个是用来将指定目录或文件排除在版本控制之外的。（其实看到单词—ignore 就可以知道了）</p></li><li><p><code>build.gradle</code>这是项目全局的 gradle 构建脚本，通常其内容是不需要更改的。</p></li><li><p><code>gradle.properties</code>这个文件是全局的 gradle 配置文件，在这里配置的属性将会影响到项目所有的 gradle 编译脚本。</p></li><li><p><code>gradlew 和 gradlew.bat</code>是用来在命令行界面中执行 gradle 文件的。不同的是：gradlew 适用于 Linux 或 Mac 系统，gradlew.bat 是在 Windows 系统使用。</p></li><li><p><code>local.properties</code>用于指定本机中的 Android SDK 路径，通常不需要进行修改，除非你挪动了 Android SDK 路径。</p></li><li><p><code>settings.gradle</code>用于指定项目中所有引进的模块。</p></li><li><p><code>MyDemo.iml</code>iml 文件是所有 IntelliJ IDEA 项目都会自动生成的一个文件（因为 Android Studio 是基于 IntelliJ IDEA 开发的），用于表示这是一个 IntelliJ IDEA 文件，我们无需修改。</p></li></ul><ol start="7"><li>配置工程</li></ol><p>将 SDK 实例项目中 <code>res/values</code>和<code>assets/data</code> 拷贝过来</p><p>将 lib.5plus.base-release.aar、android-gif-drawable-release@1.2.23.aar、uniapp-v8-release.aar、oaid_sdk_1.0.25.aar 和 breakpad-build-release.aar 拷贝到 libs 目录下</p><p>在 build.gradle 中添加资源引用</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code>android<span class="token punctuation">{</span>\n    aaptOptions<span class="token punctuation">{</span>\n        additionalParameters <span class="token string">&#39;--auto-add-overlay&#39;</span>\n        ignoreAssetsPattern <span class="token interpolation-string"><span class="token string">&quot;!.svn:!.git:.*:!CVS:!thumbs.db:!picasa.ini:!*.scc:*~&quot;</span></span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">dependencies</span> <span class="token punctuation">{</span>\n    <span class="token keyword">implementation</span> <span class="token function">fileTree</span><span class="token punctuation">(</span>include<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*.jar&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dir<span class="token punctuation">:</span> <span class="token string">&#39;libs&#39;</span><span class="token punctuation">)</span>\n    <span class="token keyword">implementation</span> <span class="token function">fileTree</span><span class="token punctuation">(</span>include<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;*.aar&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dir<span class="token punctuation">:</span> <span class="token string">&#39;libs&#39;</span><span class="token punctuation">)</span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;androidx.appcompat:appcompat:1.0.0&#39;</span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;androidx.legacy:legacy-support-v4:1.0.0&#39;</span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;androidx.recyclerview:recyclerview:1.0.0&#39;</span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;com.facebook.fresco:fresco:2.5.0&#39;</span>\n    <span class="token keyword">implementation</span> <span class="token interpolation-string"><span class="token string">&quot;com.facebook.fresco:animated-gif:2.5.0&quot;</span></span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;com.github.bumptech.glide:glide:4.9.0&#39;</span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;com.alibaba:fastjson:1.1.46.android&#39;</span>\n    <span class="token keyword">implementation</span> <span class="token string">&#39;androidx.webkit:webkit:1.3.0&#39;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 Androidmanifest.xml 添加</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>\n    <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span>\n        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dcloud_appkey<span class="token punctuation">&quot;</span></span>\n        <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>替换为自己申请的Appkey<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除默认 MainActivity 节点</p><p><img src="'+d+'" alt=""></p><p>8.gradle 导入证书</p><p><img src="'+c+'" alt=""></p><p><img src="'+u+'" alt=""></p><p>9.uniapp进行打包将打包好的文件复制到 <code>assets/apps</code>里</p><p><img src="'+m+'" alt=""></p><p><strong>保证<code>dcloud_control.xml</code>及uniapp项目id及Dcloud后台appID一致</strong></p><p>10.输出apk文件</p><p><img src="'+g+'" alt=""></p>',21),w={},f=(0,s(61935).Z)(w,[["render",function(a,n){const s=(0,e.up)("ExternalLinkIcon");return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("p",null,[(0,e.Uk)("官方文档："),(0,e._)("a",k,[(0,e.Uk)("https://nativesupport.dcloud.net.cn/AppDocs/#"),(0,e.Wm)(s)])]),(0,e._)("p",null,[(0,e.Uk)("1.安装 jdk "),(0,e._)("a",v,[(0,e.Uk)("https://www.oracle.com/java/technologies/downloads/"),(0,e.Wm)(s)])]),b,(0,e._)("p",null,[(0,e._)("a",h,[(0,e.Uk)("https://nativesupport.dcloud.net.cn/AppDocs/download/android.html#"),(0,e.Wm)(s)])]),y])}]])},61935:(a,n)=>{n.Z=(a,n)=>{const s=a.__vccOpts||a;for(const[a,e]of n)s[a]=e;return s}},28479:(a,n,s)=>{s.r(n),s.d(n,{data:()=>e});const e=JSON.parse('{"key":"v-67343b62","path":"/uniapp/android.html","title":"Android离线打包","lang":"zh-CN","frontmatter":{"title":"Android离线打包","category":["Uniapp","Android"],"date":"2022-12-13T00:00:00.000Z","summary":"官方文档：https://nativesupport.dcloud.net.cn/AppDocs/# 1.安装 jdk https://www.oracle.com/java/technologies/downloads/ 2.生成签名证书 3.查看证书 4.生成 AppKey 包名必须和 android studio 项目的包名一致 5.下载离线 SDK ","head":[["meta",{"property":"og:url","content":"https://luxiag.github.io/uniapp/android.html"}],["meta",{"property":"og:title","content":"Android离线打包"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://luxiag.github.io/"}],["meta",{"property":"og:updated_time","content":"2023-04-19T06:43:34.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"Android离线打包"}],["meta",{"property":"article:published_time","content":"2022-12-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-19T06:43:34.000Z"}]]},"excerpt":"","headers":[],"git":{"createdTime":1673514916000,"updatedTime":1681886614000,"contributors":[{"name":"luxiag","email":"luxiag@qq.com","commits":1},{"name":"卢祥","email":"example@qq.com","commits":1}]},"readingTime":{"minutes":3.75,"words":1125},"filePathRelative":"uniapp/android.md","localizedDate":"2022年12月13日"}')}}]);