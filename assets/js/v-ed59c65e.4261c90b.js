"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9165],{80084:(a,n,s)=>{s.r(n),s.d(n,{default:()=>u});var t=s(71534),e=(s(904),s(32049)),p=s(86171);s(55172),s(55529),s(43891),s(55939);const o={href:"https://threejs.org/",target:"_blank",rel:"noopener noreferrer"},c=(0,t.uE)('<h2 id="曲线运动" tabindex="-1" data-v-12020e08><a class="header-anchor" href="#曲线运动" aria-hidden="true" data-v-12020e08>#</a> 曲线运动</h2><div class="language-javascript line-numbers-mode" data-ext="js" data-v-12020e08><pre class="language-javascript" data-v-12020e08><code data-v-12020e08>  <span class="token comment" data-v-12020e08>// 从一系列的点创建一条平滑的三维样条曲线。</span>\n  curve <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>CatmullRomCurve3</span><span class="token punctuation" data-v-12020e08>(</span>\n    <span class="token punctuation" data-v-12020e08>[</span>\n      <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Vector3</span><span class="token punctuation" data-v-12020e08>(</span><span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>10</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>10</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>,</span>\n      <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Vector3</span><span class="token punctuation" data-v-12020e08>(</span><span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>,</span>\n      <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Vector3</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>,</span>\n      <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Vector3</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>,</span>\n      <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Vector3</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>10</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>10</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>,</span>\n    <span class="token punctuation" data-v-12020e08>]</span><span class="token punctuation" data-v-12020e08>,</span>\n    <span class="token boolean" data-v-12020e08>true</span>\n  <span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token comment" data-v-12020e08>// 使用getPoint（t）返回一组divisions+1的点</span>\n  <span class="token keyword" data-v-12020e08>const</span> points <span class="token operator" data-v-12020e08>=</span> curve<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>getPoints</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>500</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token comment" data-v-12020e08>// 通过点队列设置该 BufferGeometry 的 attribute。</span>\n  <span class="token keyword" data-v-12020e08>const</span> geometry <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>BufferGeometry</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>setFromPoints</span><span class="token punctuation" data-v-12020e08>(</span>points<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n\n  <span class="token keyword" data-v-12020e08>const</span> material <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>LineBasicMaterial</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>{</span> <span class="token literal-property property" data-v-12020e08>color</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0xff0000</span> <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token keyword" data-v-12020e08>const</span> curveObject <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Line</span><span class="token punctuation" data-v-12020e08>(</span>geometry<span class="token punctuation" data-v-12020e08>,</span> material<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  scene<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>add</span><span class="token punctuation" data-v-12020e08>(</span>curveObject<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n\n\n  <span class="token keyword" data-v-12020e08>function</span> <span class="token function" data-v-12020e08>animate</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>{</span>\n      renderer<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>render</span><span class="token punctuation" data-v-12020e08>(</span>scene<span class="token punctuation" data-v-12020e08>,</span> camera<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n      <span class="token keyword" data-v-12020e08>const</span> elapsed <span class="token operator" data-v-12020e08>=</span> clock<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>getElapsedTime</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n      <span class="token keyword" data-v-12020e08>const</span> time <span class="token operator" data-v-12020e08>=</span> elapsed<span class="token operator" data-v-12020e08>/</span><span class="token number" data-v-12020e08>10</span><span class="token operator" data-v-12020e08>%</span><span class="token number" data-v-12020e08>1</span><span class="token punctuation" data-v-12020e08>;</span>\n      <span class="token keyword" data-v-12020e08>const</span> point <span class="token operator" data-v-12020e08>=</span> curve<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>getPoint</span><span class="token punctuation" data-v-12020e08>(</span>time<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n      moon<span class="token punctuation" data-v-12020e08>.</span>position<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>copy</span><span class="token punctuation" data-v-12020e08>(</span>point<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n      camera<span class="token punctuation" data-v-12020e08>.</span>position<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>copy</span><span class="token punctuation" data-v-12020e08>(</span>point<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n      camera<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>lookAt</span><span class="token punctuation" data-v-12020e08>(</span>earth<span class="token punctuation" data-v-12020e08>.</span>position<span class="token punctuation" data-v-12020e08>)</span>\n      <span class="token function" data-v-12020e08>requestAnimationFrame</span><span class="token punctuation" data-v-12020e08>(</span>animate<span class="token punctuation" data-v-12020e08>)</span>\n  <span class="token punctuation" data-v-12020e08>}</span>\n\n</code></pre><div class="line-numbers" aria-hidden="true" data-v-12020e08><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div></div></div>',2),d=(0,t.uE)('<div class="language-javascript line-numbers-mode" data-ext="js" data-v-12020e08><pre class="language-javascript" data-v-12020e08><code data-v-12020e08><span class="token keyword" data-v-12020e08>const</span> curveHandles <span class="token operator" data-v-12020e08>=</span> <span class="token punctuation" data-v-12020e08>[</span><span class="token punctuation" data-v-12020e08>]</span><span class="token punctuation" data-v-12020e08>;</span> <span class="token comment" data-v-12020e08>// 曲线控制点数组</span>\n  <span class="token comment" data-v-12020e08>// 初始化曲线控制点，设置成立方样条曲线</span>\n  <span class="token keyword" data-v-12020e08>const</span> initialPoints <span class="token operator" data-v-12020e08>=</span> <span class="token punctuation" data-v-12020e08>[</span>\n    <span class="token punctuation" data-v-12020e08>{</span> <span class="token literal-property property" data-v-12020e08>x</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>1</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>y</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>z</span><span class="token operator" data-v-12020e08>:</span> <span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>1</span> <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>,</span>\n    <span class="token punctuation" data-v-12020e08>{</span> <span class="token literal-property property" data-v-12020e08>x</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>1</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>y</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>z</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>1</span> <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>,</span>\n    <span class="token punctuation" data-v-12020e08>{</span> <span class="token literal-property property" data-v-12020e08>x</span><span class="token operator" data-v-12020e08>:</span> <span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>1</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>y</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>z</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>1</span> <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>,</span>\n    <span class="token punctuation" data-v-12020e08>{</span> <span class="token literal-property property" data-v-12020e08>x</span><span class="token operator" data-v-12020e08>:</span> <span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>1</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>y</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token literal-property property" data-v-12020e08>z</span><span class="token operator" data-v-12020e08>:</span> <span class="token operator" data-v-12020e08>-</span><span class="token number" data-v-12020e08>1</span> <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>,</span>\n  <span class="token punctuation" data-v-12020e08>]</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token keyword" data-v-12020e08>const</span> boxGeometry <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>BoxGeometry</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>0.1</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>0.1</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token number" data-v-12020e08>0.1</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token keyword" data-v-12020e08>const</span> boxMaterial <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>MeshBasicMaterial</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token keyword" data-v-12020e08>for</span> <span class="token punctuation" data-v-12020e08>(</span><span class="token keyword" data-v-12020e08>const</span> handlePos <span class="token keyword" data-v-12020e08>of</span> initialPoints<span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n    <span class="token keyword" data-v-12020e08>const</span> handle <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Mesh</span><span class="token punctuation" data-v-12020e08>(</span>boxGeometry<span class="token punctuation" data-v-12020e08>,</span> boxMaterial<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n    handle<span class="token punctuation" data-v-12020e08>.</span>position<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>copy</span><span class="token punctuation" data-v-12020e08>(</span>handlePos<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n    curveHandles<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>push</span><span class="token punctuation" data-v-12020e08>(</span>handle<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n    scene<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>add</span><span class="token punctuation" data-v-12020e08>(</span>handle<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token punctuation" data-v-12020e08>}</span>\n\n   <span class="token comment" data-v-12020e08>// 创建立方样条曲线</span>\n <span class="token keyword" data-v-12020e08>const</span> curve <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>CatmullRomCurve3</span><span class="token punctuation" data-v-12020e08>(</span>\n   curveHandles<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>map</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>(</span><span class="token parameter" data-v-12020e08>handle</span><span class="token punctuation" data-v-12020e08>)</span> <span class="token operator" data-v-12020e08>=&gt;</span> handle<span class="token punctuation" data-v-12020e08>.</span>position<span class="token punctuation" data-v-12020e08>)</span>\n <span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n curve<span class="token punctuation" data-v-12020e08>.</span>curveType <span class="token operator" data-v-12020e08>=</span> <span class="token string" data-v-12020e08>&quot;centripetal&quot;</span><span class="token punctuation" data-v-12020e08>;</span> <span class="token comment" data-v-12020e08>// 曲线类型(切向加速调整)</span>\n curve<span class="token punctuation" data-v-12020e08>.</span>closed <span class="token operator" data-v-12020e08>=</span> <span class="token boolean" data-v-12020e08>true</span><span class="token punctuation" data-v-12020e08>;</span> <span class="token comment" data-v-12020e08>// 是否封闭</span>\n <span class="token comment" data-v-12020e08>// 创建曲线并根据关键点更新线条</span>\n <span class="token keyword" data-v-12020e08>const</span> points <span class="token operator" data-v-12020e08>=</span> curve<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>getPoints</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>50</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n <span class="token keyword" data-v-12020e08>const</span> line <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>LineLoop</span><span class="token punctuation" data-v-12020e08>(</span>\n   <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>BufferGeometry</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>setFromPoints</span><span class="token punctuation" data-v-12020e08>(</span>points<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>,</span>\n   <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>LineBasicMaterial</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>{</span> <span class="token literal-property property" data-v-12020e08>color</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0x00ff00</span> <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>)</span>\n <span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n scene<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>add</span><span class="token punctuation" data-v-12020e08>(</span>line<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n <span class="token comment" data-v-12020e08>// 加载字体并创建 3D 文本</span>\n <span class="token keyword" data-v-12020e08>const</span> loader <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>FontLoader</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n loader<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>load</span><span class="token punctuation" data-v-12020e08>(</span><span class="token string" data-v-12020e08>&quot;fonts/helvetiker_regular.typeface.json&quot;</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token keyword" data-v-12020e08>function</span> <span class="token punctuation" data-v-12020e08>(</span><span class="token parameter" data-v-12020e08>font</span><span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n   <span class="token keyword" data-v-12020e08>const</span> geometry <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>TextGeometry</span><span class="token punctuation" data-v-12020e08>(</span><span class="token string" data-v-12020e08>&quot;Hello three.js!&quot;</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token punctuation" data-v-12020e08>{</span>\n     <span class="token literal-property property" data-v-12020e08>font</span><span class="token operator" data-v-12020e08>:</span> font<span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>size</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0.2</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>height</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0.05</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>curveSegments</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>12</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>bevelEnabled</span><span class="token operator" data-v-12020e08>:</span> <span class="token boolean" data-v-12020e08>true</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>bevelThickness</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0.02</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>bevelSize</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0.01</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>bevelOffset</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span>\n     <span class="token literal-property property" data-v-12020e08>bevelSegments</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>5</span><span class="token punctuation" data-v-12020e08>,</span>\n   <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   geometry<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>rotateX</span><span class="token punctuation" data-v-12020e08>(</span>Math<span class="token punctuation" data-v-12020e08>.</span><span class="token constant" data-v-12020e08>PI</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   <span class="token keyword" data-v-12020e08>const</span> material <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>MeshStandardMaterial</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>{</span>\n     <span class="token literal-property property" data-v-12020e08>color</span><span class="token operator" data-v-12020e08>:</span> <span class="token number" data-v-12020e08>0x99ffff</span><span class="token punctuation" data-v-12020e08>,</span>\n   <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   <span class="token keyword" data-v-12020e08>const</span> objectToCurve <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Mesh</span><span class="token punctuation" data-v-12020e08>(</span>geometry<span class="token punctuation" data-v-12020e08>,</span> material<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   <span class="token comment" data-v-12020e08>/*\n   \n   \n   */</span>\n   flow <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>Flow</span><span class="token punctuation" data-v-12020e08>(</span>objectToCurve<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   flow<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>updateCurve</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> curve<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   scene<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>add</span><span class="token punctuation" data-v-12020e08>(</span>flow<span class="token punctuation" data-v-12020e08>.</span>object3D<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n <span class="token comment" data-v-12020e08>// 创建射线对象</span>\n rayCaster <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>THREE<span class="token punctuation" data-v-12020e08>.</span>Raycaster</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n <span class="token comment" data-v-12020e08>// 创建变换控制器对象</span>\n control <span class="token operator" data-v-12020e08>=</span> <span class="token keyword" data-v-12020e08>new</span> <span class="token class-name" data-v-12020e08>TransformControls</span><span class="token punctuation" data-v-12020e08>(</span>camera<span class="token punctuation" data-v-12020e08>,</span> renderer<span class="token punctuation" data-v-12020e08>.</span>domElement<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n control<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>addEventListener</span><span class="token punctuation" data-v-12020e08>(</span><span class="token string" data-v-12020e08>&quot;dragging-changed&quot;</span><span class="token punctuation" data-v-12020e08>,</span> <span class="token keyword" data-v-12020e08>function</span> <span class="token punctuation" data-v-12020e08>(</span><span class="token parameter" data-v-12020e08>event</span><span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n   <span class="token keyword" data-v-12020e08>if</span> <span class="token punctuation" data-v-12020e08>(</span><span class="token operator" data-v-12020e08>!</span>event<span class="token punctuation" data-v-12020e08>.</span>value<span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n     <span class="token keyword" data-v-12020e08>const</span> points <span class="token operator" data-v-12020e08>=</span> curve<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>getPoints</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>50</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n     line<span class="token punctuation" data-v-12020e08>.</span>geometry<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>setFromPoints</span><span class="token punctuation" data-v-12020e08>(</span>points<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n     flow<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>updateCurve</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>,</span> curve<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n   <span class="token punctuation" data-v-12020e08>}</span>\n <span class="token punctuation" data-v-12020e08>}</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n\n  <span class="token comment" data-v-12020e08>// 逐帧动画函数</span>\n<span class="token keyword" data-v-12020e08>function</span> <span class="token function" data-v-12020e08>animate</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n  <span class="token function" data-v-12020e08>requestAnimationFrame</span><span class="token punctuation" data-v-12020e08>(</span>animate<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n\n  <span class="token comment" data-v-12020e08>// 判断是否点击场景</span>\n  <span class="token keyword" data-v-12020e08>if</span> <span class="token punctuation" data-v-12020e08>(</span>action <span class="token operator" data-v-12020e08>===</span> <span class="token constant" data-v-12020e08>ACTION_SELECT</span><span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n    rayCaster<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>setFromCamera</span><span class="token punctuation" data-v-12020e08>(</span>mouse<span class="token punctuation" data-v-12020e08>,</span> camera<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n    action <span class="token operator" data-v-12020e08>=</span> <span class="token constant" data-v-12020e08>ACTION_NONE</span><span class="token punctuation" data-v-12020e08>;</span>\n    <span class="token keyword" data-v-12020e08>const</span> intersects <span class="token operator" data-v-12020e08>=</span> rayCaster<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>intersectObjects</span><span class="token punctuation" data-v-12020e08>(</span>curveHandles<span class="token punctuation" data-v-12020e08>,</span> <span class="token boolean" data-v-12020e08>false</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n    <span class="token keyword" data-v-12020e08>if</span> <span class="token punctuation" data-v-12020e08>(</span>intersects<span class="token punctuation" data-v-12020e08>.</span>length<span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n      <span class="token keyword" data-v-12020e08>const</span> target <span class="token operator" data-v-12020e08>=</span> intersects<span class="token punctuation" data-v-12020e08>[</span><span class="token number" data-v-12020e08>0</span><span class="token punctuation" data-v-12020e08>]</span><span class="token punctuation" data-v-12020e08>.</span>object<span class="token punctuation" data-v-12020e08>;</span>\n      control<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>attach</span><span class="token punctuation" data-v-12020e08>(</span>target<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n      scene<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>add</span><span class="token punctuation" data-v-12020e08>(</span>control<span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n    <span class="token punctuation" data-v-12020e08>}</span>\n  <span class="token punctuation" data-v-12020e08>}</span>\n\n  <span class="token comment" data-v-12020e08>// 曲线模拟器运动</span>\n  <span class="token keyword" data-v-12020e08>if</span> <span class="token punctuation" data-v-12020e08>(</span>flow<span class="token punctuation" data-v-12020e08>)</span> <span class="token punctuation" data-v-12020e08>{</span>\n    flow<span class="token punctuation" data-v-12020e08>.</span><span class="token function" data-v-12020e08>moveAlongCurve</span><span class="token punctuation" data-v-12020e08>(</span><span class="token number" data-v-12020e08>0.001</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n  <span class="token punctuation" data-v-12020e08>}</span>\n\n  <span class="token comment" data-v-12020e08>// 渲染场景</span>\n  <span class="token function" data-v-12020e08>render</span><span class="token punctuation" data-v-12020e08>(</span><span class="token punctuation" data-v-12020e08>)</span><span class="token punctuation" data-v-12020e08>;</span>\n<span class="token punctuation" data-v-12020e08>}</span>\n</code></pre><div class="line-numbers" aria-hidden="true" data-v-12020e08><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div><div class="line-number" data-v-12020e08></div></div></div>',1),l=["height","width"],v={__name:"threejs-curve.html",setup(a){const n=(0,e.iH)(),s=new p.SUY,v=new p.dpR,u=(0,e.iH)(900);return(0,e.iH)(),(0,t.bv)((()=>{!function(){let a,t,e,o,c,d;o=new p.cPb(75,2,.1,200),o.position.set(0,5,-10),c=new p.xsS;const l=new p.Ox3(16777215);l.position.set(0,0,1),c.add(l);const i=new p.Mig(16777215,.5);c.add(i);const r=new p.xo$(5,16,16),k=new p.xoR({specular:3355443,shininess:5,map:v.load("/assets/textures/planets/earth_atmos_2048.jpg"),specularMap:v.load("/assets/textures/planets/earth_specular_2048.jpg"),normalMap:v.load("/assets/textures/planets/earth_normal_2048.jpg"),normalScale:new p.FM8(.85,.85)});t=new p.Kj0(r,k),t.position.z=-4,c.add(t);const m=new p.xo$(.5,16,16),b=new p.xoR({shininess:5,map:v.load("/assets/textures/planets/moon_1024.jpg")});a=new p.Kj0(m,b),c.add(a),e=new p.YT8([new p.Pa4(-10,0,10),new p.Pa4(-5,5,5),new p.Pa4(0,0,5),new p.Pa4(5,-5,5),new p.Pa4(10,0,10)],!0);const y=e.getPoints(500),w=(new p.u9r).setFromPoints(y),f=new p.nls({color:16711680}),h=new p.x12(w,f);c.add(h),d=new p.CP7,d.setPixelRatio(window.devicePixelRatio),window.addEventListener("resize",(function(){o.aspect=2,o.updateProjectionMatrix(),d.setSize(n.value.offsetWidth,n.value.offsetWidth/2),u.value=n.value.offsetWidth})),d.setSize(n.value.offsetWidth,n.value.offsetWidth/2),n.value.appendChild(d.domElement),d.render(c,o),function n(){d.render(c,o);const p=s.getElapsedTime(),l=p/10%1;a.position.set(8*Math.sin(p),0,8*Math.cos(p));const v=e.getPoint(l);o.position.copy(v),o.lookAt(t.position),requestAnimationFrame(n)}()}(),u.value=n.value.offsetWidth})),(a,s)=>{const e=(0,t.up)("ExternalLinkIcon");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("p",null,[(0,t.Uk)("参考："),(0,t._)("a",o,[(0,t.Uk)("https://threejs.org/"),(0,t.Wm)(e)])]),c,(0,t._)("div",{class:"motion",ref_key:"motion",ref:n},null,512),d,(0,t.kq)(' <div ref="modifierCurveRef"></div> '),(0,t._)("iframe",{src:"/threejs/examples/webgl_modifier_curve.html",height:u.value/2,width:u.value},null,8,l)])}}},u=(0,s(61935).Z)(v,[["__scopeId","data-v-12020e08"]])},71357:(a,n,s)=>{s.r(n),s.d(n,{data:()=>t});const t=JSON.parse('{"key":"v-ed59c65e","path":"/threejs/threejs-curve.html","title":"ThreeJS中的曲线应用","lang":"zh-CN","frontmatter":{"title":"ThreeJS中的曲线应用","date":"2022-02-01T00:00:00.000Z","category":["ThreeJS"],"summary":"参考：https://threejs.org/ 曲线运动 --\x3e import { withBase } from \'@vuepress/client\' import {ref,onMounted} from \'vue\' import * as THREE from \\"three\\"; import { OrbitControls } from \\"three/","head":[["meta",{"property":"og:url","content":"https://luxiag.github.io/threejs/threejs-curve.html"}],["meta",{"property":"og:title","content":"ThreeJS中的曲线应用"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2023-04-27T03:25:07.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:published_time","content":"2022-02-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-27T03:25:07.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"曲线运动","slug":"曲线运动","link":"#曲线运动","children":[]}],"git":{"createdTime":1681808512000,"updatedTime":1682565907000,"contributors":[{"name":"卢祥","email":"example@qq.com","commits":4}]},"readingTime":{"minutes":4.01,"words":1202},"filePathRelative":"threejs/threejs-curve.md","localizedDate":"2022年2月1日"}')}}]);